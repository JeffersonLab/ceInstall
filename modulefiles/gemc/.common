# Common modulefile

conflict gemc
prereq sim_system

module-whatis gemc, https://gemc.github.io/home
source [file dirname $ModulesCurrentModulefile]/../util/functions.tcl

# if major $version is 2, then it's gemc
set which clas12tags
if { [ lindex [ split $version . ] 0 ] == 2  } {
	set which gemc
}

set dir [home]/[osrelease]/$which/${version}
set ilib [choose_dir $dir/lib $dir/lib64]

prepend-path PATH $dir/bin
prepend-ldpath    $ilib
prepend-path      PKG_CONFIG_PATH $ilib/pkgconfig

setenv GEMC_VERSION  $version
setenv GEMC_BASE_DIR $dir
setenv FIELD_DIR     [home]/noarch/data/magfield

# geant4
prereq geant4/${g4_version}

# gemc
prereq .scons_bm/${scons_bm_version}
#prereq --optional ccdb/${ccdb_version}
if { $version == "4.4.2" } {
#	prereq .evio/${evio_version}
#    prereq .banks/${banks_version}
}
if { $version != "4.4.2" } {
#	prereq hipo
}
#prereq .mlibrary/${mlibrary_version}
#prereq .cmag/${cmag_version}







if { $version eq "5.4" || $version eq "5.5" || $version eq "5.6" || $version eq "5.7" || $version eq "5.8"} {
	puts stderr "Warning: gemc $version is deprecated. Use 5.10 instead."
}

proc ModulesTest { } {

	set retcode 1



	return $retcode
}

