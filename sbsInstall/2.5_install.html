<style type="text/css">
	.row { vertical-align: top; height:auto !important; }
	.list {display:none; }
	pre {color: #050;}
	code {color: #008;}
	th { color: red; text-align: center;}
	td { color: #929;  text-align: center;}
	table {     padding: 15px; border-spacing: 5px;}
	.show {display: none; }
	.hide:target + .show {display: inline; }
	.hide:target {display: none; }
	.hide:target ~ .list {display:inline; }
	@media print { .hide, .show { display: none; } }
	</style>

<html>
	
	<h2> Software installation instructions (JLAB_VERSION 2.5) </h2>
	
	These instructions are verified on:
	<ul> <b>Linux:</b></ul>
	<ul>
		<li> CentOS 7</li>
		<li> CentOS 8</li>
	</ul>
	
	<ul> <b>Mac:</b></ul>
	<ul>
		<li> Big Sur</li>
	</ul>
	<br/>
	These are instructions to install JLAB_VERSION 2.5. You can find supported JLAB_VERSION releases instructions below:<br/>
	<ul>
		<li> <a href="https://www.jlab.org/12gev_phys/packages/sources/ceInstall/2.5_install.html"> Version 2.5</a><br/></li>
		<li> <a href="https://www.jlab.org/12gev_phys/packages/sources/ceInstall/2.6_install.html"> Version 2.6</a><br/></li>
	</ul>
	
	<hr>
	
	<h2> General Requirements:</h2>
	
	<ul>
		<li> csh shell </li>
		<li> network connection to download the various packages during installation</li>
		<li> wget</li>
		<li> git</li>
		<li> cmake >= 3.3 </li>
		<li> scons version >= 3</li>
		<li> mysql (including devel) and openssl</li>
		<li> qt</li>
	</ul>
	
	
	<ul>
		<h3> &#x2318; MAC OS specific requirements</h3>
		<i> NOTICE: if you try these and see packages are missing or not needed anymore, please
			<a href="mailto:ungaro@jlab.org?subject=About%20environment" target="_">let me know</a>.<br/><br/>
		</i>
		Remember to update brew:
		<pre>
brew upgrade ; brew update
		</pre>


		You can install the dependencies with <a href="http://brew.sh"> homebrew</a>:<br/><br/>
		
		<div class="row">
			<a href="#hide1" class="hide" id="hide1">List of packages:</a><br/><br/>
			<pre>
brew install wget cmake mysql openssl qt<br/>
			</pre>
		<br/>
		
		
	</ul>
	
	<ul>
		<h3> &#128039; Ubuntu (Debian-line) specific requirements</h3>
		<i> NOTICE: if you try these and see packages are missing or not needed anymore, please
			 <a href="mailto:ungaro@jlab.org?subject=About%20environment" target="_">let me know</a>.<br/><br/>
		</i>
		You can install the dependencies with apt-get:<br/><br/>
		
		
		<div class="row">
			<a href="#hide2" class="hide" id="hide2">List of packages</a>
			<a href="#show2" class="show" id="show2">Collapse List</a>
			<div class="list">
				<ul>
					<li>sudo apt-get install g++ mysql-client libmysqlclient-dev libexpat1-dev tcsh cmake git scons</li>
					<li>sudo apt-get install libx11-dev libxext-dev libglu1-mesa-dev libxt-dev libxmu-dev libxrender-dev libxft-dev libafterimage-dev </li>
				</ul>
			</div>
		</div>
		<br/>
		
	</ul>
	
	<ul>
		<h3>&#128039; Fedora (red-hat line) specific requirements</h3>
		<i> NOTICE: if you try these and see packages are missing or not needed anymore, please
			<a href="mailto:ungaro@jlab.org?subject=About%20environment" target="_">let me know</a>.<br/><br/>
		</i>
		You can install the dependencies with dnf (or yum):<br/><br/>
		
		
		<div class="row">
			<a href="#hide3" class="hide" id="hide3">List of packages</a>
			<a href="#show3" class="show" id="show3">Collapse List</a>
			<div class="list">
				<ul>
					<li>dnf install gcc-c++ expat-devel zlib-devel</li>
					<li>dnf install libx11-devel mesa-libGLU-devel libXmu-devel </li>
					<li>dnf install mariadb-devel <br/>(the mysql package name may vary depends on the OS, you can dnf yum search mysql to find out the available version)</li><br/>
					Recommended: the system version of qt. The following line should be enough to install all the dependencies.
					<li>dnf install qt5-qttools-devel  </li>
					
				</ul>
			</div>
		</div>
		<br/>
		
	</ul>
	<br/>
	<hr>
	
	<h1> Installation:</h1>
	
	
	<ol>
		<li>
			(Optional): create a file in your home directory: <pre>.jlab_software</pre> that contains one line only,
			with the packages you're interested in. The default (also works if .jlab_software is not present) is:
			<pre><code>
banks ccdb clhep evio geant4 gemc glibrary hipo mlibrary mysql qt root scons xercesc
			</code></pre>
			<h4>Only the packages inside <i>.jlab_software</i> will be considered when setting the environment.</h4><br/>

		</li>


		<li>
			Choose a place to install the software. This place will be called JLAB_ROOT.  <br/><br/>
			A standard (but not necessary) choice for <b>JLAB_ROOT</b> is <b> /opt/jlab_software</b>:<br/>
			
			<pre><code>
set JLAB_ROOT=/opt/jlab_software
			</code></pre>
			Create the working directory:
			
			<pre><code>
mkdir -p $JLAB_ROOT/2.5
			</code></pre>
		</li>
		
		
		
		<li>Get the installation scripts:
			<pre><code>
cd $JLAB_ROOT
wget -c  http://www.jlab.org/12gev_phys/packages/sources/ceInstall/ceInstall_2.5.tar.gz
tar -zxpf ceInstall_2.5.tar.gz --strip-components 1 -C 2.5
			</code> </pre>
			
			Set the environment variables. You should put these lines in your login script:
			
			<pre><code>
setenv JLAB_ROOT /opt/jlab_software
source $JLAB_ROOT/2.5/ce/jlab.csh
			</code></pre>
			
		</li>
		
		
		<li>Start a new shell. Now you should see a log similar to this
<pre>
> Common Environment Version: <2.5>  (Wed Feb 9 2022)
> Running as ungaro on enpungarombp.jlab.org
> OS Release:    Darwin_macosx11.6.2-clang13.0.0
> JLAB_ROOT set to:     /opt/jlab_software
> JLAB_SOFTWARE set to: /opt/jlab_software/2.5/Darwin_macosx11.6.2-clang13.0.0

!! Attention:  CLHEP  installation check /opt/jlab_software/2.5/Darwin_macosx11.6.2-clang13.0.0/clhep/2.4.4.2/lib  not found
!! Attention:  XERCESC  installation check /opt/jlab_software/2.5/Darwin_macosx11.6.2-clang13.0.0/xercesc/3.2.3/  not found
!! Attention:  QT    installation check /opt/jlab_software/2.5/Darwin_macosx11.6.2-clang13.0.0/qt/system/clang_64/lib  not found
!! Attention:  GEANT4  installation check /opt/jlab_software/2.5/Darwin_macosx11.6.2-clang13.0.0/geant4/4.10.07.p03/bin  not found
!! Attention:  SCONS  installation check /opt/jlab_software/2.5/scons_bm/1.10/site_tools  not found
!! Attention:  MLIBRARY  installation check /opt/jlab_software/2.5/Darwin_macosx11.6.2-clang13.0.0/mlibrary/1.5/lib  not found
!! Attention:  GEMC  installation check /opt/jlab_software/2.5/Darwin_macosx11.6.2-clang13.0.0/gemc/2.9/gemc  not found
!! Attention:  CCDB  installation check /opt/jlab_software/2.5/Darwin_macosx11.6.2-clang13.0.0/ccdb/ccdb-1.07.00/lib  not found
!! Attention:  MYSQL  installation check /opt/jlab_software/2.5/Darwin_macosx11.6.2-clang13.0.0/mysql/lib  not found
!! Attention:  ROOT  installation check /opt/jlab_software/2.5/Darwin_macosx11.6.2-clang13.0.0/root/6.24.06/bin/root-config  not found
!! Attention:  HIPO  installation check /opt/jlab_software/2.5/Darwin_macosx11.6.2-clang13.0.0/hipo/1.4/lib/libhipo4.a  not found
!! Attention:  BANKS  installation check /opt/jlab_software/2.5/Darwin_macosx11.6.2-clang13.0.0/banks/1.8/bin  not found
!! Attention:  EVIO  installation check /opt/jlab_software/2.5/Darwin_macosx11.6.2-clang13.0.0/evio/5.1/bin  not found</pre>
</pre>
		If you do, great! The enviroment seems correct and you're ready to run the installation scripts.
		Every script that you run below will replace the corresponding warning log with a successful one.<br/><br/>
		<b>Notice</b>: if you want to preserve some environment variables use the option "keepmine" :
		<pre><code>
source $JLAB_ROOT/2.5/ce/jlab.csh keepmine
		</code></pre>
		</li>

		<li>
			Execute the go script for the packages you wish to install:
			<pre><code>
cd $JLAB_ROOT/2.5/install
				
./go_clhep
./go_xercesc
./go_qt system
(see notes below for non system-qt installation)
./go_geant4 data
./go_geant4 src
./go_geant4 makeMT
(use ./go_geant4 make for single threaded installation of geant4)
./go_sconsscript
./go_evio
./go_mysql
./go_ccdb
./go_mlibrary
./go_hipo
./go_glibrary
./go_gemc
./go_root
./go_banks
			</code></pre>
			<b>Note</b>: The order of the packages above reflect the packages dependencies  <br/><br/>
		</li>


		<p>Typical installation times:</p>
		<table>
			<tr>
				<th>Package</th>
				<th>Approx Installation Time</th>
			</tr>
			<tr> <td>clhep</td>                             <td>1-2 minutes</td> </tr>
			<tr> <td>xercesc</td>                           <td>2 minute2</td> </tr>
			<tr> <td>qt (if system installed)</td>          <td>1 second</td> </tr>
			<tr> <td>qt (if installatin from scratch)&#8226</td>  <td>20 minutes</td> </tr>
			<tr> <td>geant4&#8224;</td>                     <td>10 minutes </td> </tr>
			<tr> <td>sconsscript</td>                       <td>1 second</td> </tr>
			<tr> <td>evio</td>                              <td>10 seconds</td> </tr>
			<tr> <td>mysql</td>                             <td>1 second</td> </tr>
			<tr> <td>ccdb</td>                              <td>20 seconds</td> </tr>
			<tr> <td>mlibrary&#8225;</td>                   <td>2-3 minutes</td> </tr>
			<tr> <td>gemc</td>                              <td>2 minutes</td> </tr>
			<tr> <td>root</td>                              <td>25 minutes</td> </tr>
			<tr> <td>banks</td>                             <td>5 seconds</td> </tr>
			<tr> <td>jana</td>                              <td>1 minute</td> </tr>
			<tr> <td colspan=2><hr></td> </tr>
			
			<tr> <td>Total (system qt)</td> <td>40 minutes</td> </tr>
			<tr> <td>Total (qt from scratch)</td> <td>1 hour</td> </tr>
			
		</table>
	</ol>
	&#8224; (needs fast connection to download the cross section data)   <br/>
	&#8225; you will see a lot of warnings you can ignore related to assimp.  <br/>
	&#8226; This links qt to the system installation. If you want to install qt using their offline installer, set the environment variable QT_VERSION then use 'keepmine' on the jlab script:
	<pre><code>
setenv QT_VERSION 5.10.1
source $JLAB_ROOT/devel/ce/jlab.csh keepmine
	</code></pre>
  <br/>

	
	Please email any comments/corrections/bug report/feature requests to <a href="mailto:ungaro@jlab.org?subject=About%20environment" target="_">Maurizio Ungaro</a>.

	<br/><br/><br/>
	<br/><br/><br/>
	<br/><br/><br/>
	
	
</html>









