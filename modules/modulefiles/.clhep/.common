#%Module

conflict .clhep

proc ModulesHelp { } {
    global version
    puts stderr "
    Loads clhep environment variables
    Version: $version
"
}

module-whatis "Loads clhep/${version}"

# Environment

set base_dir $env(PHYS_HOME)/$env(OSRELEASE)/$env(PHYS_SUB_DIR)/$env(PHYS_VERSION)

set dir $base_dir/clhep/${version}

prepend-path LD_LIBRARY_PATH $dir/lib

setenv CLHEP_VERSION  $version
setenv CLHEP_BASE_DIR $dir

proc ModulesTest { } {

    set var CLHEP_BASE_DIR
    set retcode 1

    # exit if is_loaded is empty
    if { [module-info loaded physlibs] == "" } {
        puts stderr "physlibs is not loaded. Use module load physlibs to load it."
        puts stderr ""
        return 0
    }

    puts stderr ""
    set installation_dir  [ getenv $var ]
    if { [file isdirectory $installation_dir ] } {
        puts stderr " Y $var \t\t $installation_dir"
    } else {
        puts stderr " N $var \t\t $installation_dir"
        set retcode 0
    }

    return $retcode
}

